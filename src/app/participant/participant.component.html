<div class="mobile-card">

  <h2 class="text-center mb-2">ðŸ§  AI Quiz</h2>
  <p class="text-xs text-center mb-3">
    Session ID: {{ sessionId }}
  </p>

  <div *ngIf="error" class="text-center text-red-600 mb-2">
    {{ error }}
  </div>

  <!-- âœ… JOIN SCREEN -->
  <div *ngIf="!participant">
    <input
        type="text"
        [(ngModel)]="name"
        placeholder="Enter your name"
        class="w-full p-2 mb-2 border rounded-lg"
    />

    <button class="btn-primary w-full" (click)="join()" [disabled]="loading">
      {{ loading ? 'Joining...' : 'Join Quiz' }}
    </button>
  </div>

  <!-- âœ… WAITING SCREEN -->
  <div *ngIf="participant && session?.status === 'NOT_STARTED'">
    <p class="text-center mt-4">Waiting for the quiz to startâ€¦</p>
  </div>

  <!-- âœ… QUIZ IN PROGRESS (ALL 10 QUESTIONS + 5 MIN TIMER) -->
  <div *ngIf="participant && session?.status === 'IN_PROGRESS' && !hasSubmitted">

    <div class="timer-bar mb-1">
      <div class="timer-bar-fill" [style.width.%]="progressPercent"></div>
    </div>

    <div class="text-xs text-center mb-3">
      Time Remaining: {{ remainingSeconds }} seconds
    </div>

    <div *ngFor="let q of session?.questions" class="mobile-card mb-3">

      <div class="font-medium mb-2">
        {{ q.text }}
      </div>

      <button
          *ngFor="let opt of q.options; index as i"
          class="answer-btn mb-2"
          (click)="selectAnswer(q.id, i)"
          [disabled]="hasSubmitted"
          [style.background]="selectedAnswers[q.id] === i ? '#c7d2fe' : ''"
      >
        {{ opt }}
      </button>

    </div>

    <button class="btn-primary w-full mt-3" (click)="submitQuiz()">
      Submit Quiz
    </button>
  </div>

  <!-- âœ… SUBMITTED SCREEN -->
  <div *ngIf="hasSubmitted" class="text-center mt-4">
    âœ… Quiz submitted successfully!
    <p class="mt-2 font-semibold">
      Your Score: {{ participant?.score }}
    </p>
  </div>

</div>
